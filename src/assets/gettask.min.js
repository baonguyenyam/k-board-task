"use strict";function __delTask(){var e=getParameterByName("id");if(!confirm("Bạn có chắc chắn xóa task này?"))return!1;$.ajax({url:"/delete",type:"POST",async:!0,dataType:"json",cache:!0,data:{id:e},contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("Token"))},complete:function(e){JSON.parse(e.responseText);window.location.href="/"}})}function __gettask_getLists(){var c=getParameterByName("id");$.ajax({url:Global.API_URL+"/tasks.json?id="+c,type:"GET",async:!0,dataType:"json",cache:!0,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("Token"))},error:function(e,a,t){},complete:function(e){var a=JSON.parse(e.responseText);for(var t in a){if(a.hasOwnProperty(t))(n=a[t].ObjectId)===c&&(a=a[t])}var s="secondary";for(var r in 1==a.MetaIndex?s="primary":2==a.MetaIndex?s="success":3==a.MetaIndex&&(s="danger"),$(".taskdetails .card").addClass("border-"+s),$(".taskdetails .card-header").addClass("bg-"+s),a)if(a.hasOwnProperty(r)){var n=a[r];"createddate"===r.toLowerCase()||"activatedts"===r.toLowerCase()?$("#data-"+r.toLowerCase()).html(moment(checkNull(n)).format("DD/MM/YYYY")+" lúc "+moment(checkNull(n)).format("HH:mm")):$("#data-"+r.toLowerCase()).html(checkNull(n)),$("#key-"+r.toLowerCase()).html(checkNull(r))}var o='<span class="badge badge-light p-1">Không hiệu lực</span>';"P"===a.State?o='<span class="badge badge-secondary p-1">Nhiệm vụ</span>':"I"===a.State?(o='<span class="badge badge-info p-1">Đang thực thi</span>',$(".viewpdf").removeClass("d-none")):"D"===a.State&&(o='<span class="badge badge-success p-1">Hoàn thành</span>'),$("#jobstates-state").html(o),$("#data-createuser").html('<a href="/getuser?id='+a.CreateID+'">'+getUserName(a.CreateID)+"</a>"),$("#data-workuser").html('<a href="/getuser?id='+a.workID+'">'+getUserName(a.workID)+"</a>"),$("#pdffiles").attr("data-files",a.MetaTextValue)}})}$(document).ready(function(){__gettask_getLists(),__main__callAction(),__main__addForm()});