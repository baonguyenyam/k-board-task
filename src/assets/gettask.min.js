"use strict";function __delTask(){var e=getParameterByName("id");if(!confirm("Bạn có chắc chắn xóa task này?"))return!1;$.ajax({url:"/delete",type:"POST",dataType:"json",cache:!0,data:{id:e},beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("Token"))},complete:function(e){window.location.href="/"}})}function __gettask_getLists(){var d=getParameterByName("id");$.ajax({url:Global.API_URL+"/tasks.json?id="+d,type:"GET",async:!0,dataType:"json",cache:!0,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+localStorage.getItem("Token"))},error:function(e,a,t){},complete:function(e){var a=JSON.parse(e.responseText);for(var t in a){if(a.hasOwnProperty(t))(o=a[t].ObjectId)===d&&(a=a[t])}var r="secondary";for(var s in 1==a.MetaIndex?r="primary":2==a.MetaIndex?r="success":3==a.MetaIndex&&(r="danger"),$(".taskdetails .card").addClass("border-"+r),$(".taskdetails .card-header").addClass("bg-"+r),a)if(a.hasOwnProperty(s)){var o=a[s];"createddate"===s.toLowerCase()||"activatedts"===s.toLowerCase()?$("#data-"+s.toLowerCase()).html(moment(checkNull(o)).format("DD/MM/YYYY")+" lúc "+moment(checkNull(o)).format("HH:mm")):$("#data-"+s.toLowerCase()).html(checkNull(o)),$("#key-"+s.toLowerCase()).html(checkNull(s))}var n='<span class="badge badge-light p-1">Không hiệu lực</span>';"P"===a.State?n='<span class="badge badge-secondary p-1">Nhiệm vụ</span>':"I"===a.State?(n='<span class="badge badge-info p-1">Đang thực thi</span>',$(".viewpdf").removeClass("d-none")):"D"===a.State&&(n='<span class="badge badge-success p-1">Hoàn thành</span>'),localStorage.getItem("permision_deltassk")&&"true"===localStorage.getItem("permision_deltassk")&&$(".del").removeClass("d-none"),$("#jobstates-state").html(n),$("#data-createuser").html('<a href="/getuser?id='+a.CreateID+'">'+getUserName(a.CreateID)+"</a>"),$("#data-workuser").html('<a href="/getuser?id='+a.workID+'">'+getUserName(a.workID)+"</a>"),$("#pdffiles").attr("data-files",a.MetaTextValue)}})}$(document).ready(function(){__gettask_getLists(),__main__callAction(),__main__addForm()});